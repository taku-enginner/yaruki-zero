class ApplicationController < ActionController::Base
  # Only allow modern browsers supporting webp images, web push, badges, import maps, CSS nesting, and CSS :has.
  # allow_browser versions: :modern
  before_action :set_greeting_message
  before_action :set_guest_message


  private

  def set_guest_message
    return if user_signed_in?

    @guest_message = [
      "こんにちは。ふらっと立ち寄ってくれてありがとう ☺️",
      "ログインしてなくても大丈夫。この場所はいつでも開いてます。",
      "初めましての方も、おかえりな方も、どうぞごゆっくり。",
      "ここは、気が向いたときに来る場所です ☕️",
      "やる気がなくても、なんとなく来てくれたらそれでOK。",
      "ログインしなくてもいい。でも来てくれて、うれしい。",
      "今日は見るだけでも十分。そんな日もあるよね。",
      "この場所が、ちょっとした安心になったらいいな。",
      "特に理由がなくても、いてくれてありがとう。",
      "「何もしてない」ってことが、今はちょうどいいのかも 🌱"
    ].sample
  end

  def set_greeting_message
    return unless user_signed_in?

    @greeting_message = [
      "おかえり。今日もゆるく、いこう。",
      "来てくれてありがとう。記録しなくてもOKだよ。",
      "無理しないでね。ここはいつでも開いてるよ。",
      "今日も◯◯さんが来てくれてちょっと嬉しい。",
      "記録してもしなくても、まずは来てくれてえらい。",
      "特に何もしなくても、ここに来たことが一歩だよ。",
      "ようこそ。なにもしなくても、OK。",
      "あ、◯◯さん。今日もなんとなく来てくれてありがとう。",
      "気が向いたら記録すればいい。それで十分。",
      "来たことを、ちゃんと自分で褒めてほしい。",
      "今日は記録しない日でもいいよ。",
      "ログイン＝一歩。もう始まってるよ。",
      "ただいまでも、おじゃましますでも、なんでもどうぞ。",
      "◯◯さんのペースでね。焦らなくて大丈夫。",
      "ぼーっとしに来ただけでも十分。",
      "ここは「ゆるい空気感」が正解です。",
      "考えすぎなくていいよ。",
      "ゆっくりでも、止まらないのがすごいこと。",
      "「とりあえずログイン」それが最強。",
      "今日も来てくれて、なんかほっとした。",
      "休む日でも、ちょっと覗いてくれたことがうれしい。",
      "「また来た」って思えるだけでいいよ。",
      "特に理由もなく、来た。それが素敵。",
      "今日のログイン、それは未来への布石（おおげさ）",
      "完璧じゃなくていいし、むしろちょうどいい。",
      "うまくいかない日も、ここには来ていい。",
      "今日の◯◯さん、存在だけで十分。",
      "またここに来てくれて、ありがとう。",
      "あんまり考えずに、いつもの場所へ。",
      "誰かが見てるような、でも見てない安心感。",
      "何もせずに帰っても大丈夫。",
      "ひとまず、ここに来てくれた自分をねぎらおう。",
      "ゆるっとする場所、ここです。",
      "毎日は来なくてもいい。でも今日は来たね。",
      "誰も責めないし、誰も急かさない。",
      "「ちょっと来ただけ」それでもログイン扱いです。",
      "ログイン、それはやさしさへの入口。",
      "何も入力しない勇気、持っていい。",
      "ここでは深呼吸が正解。",
      "すこし疲れたら、何もせずいていいよ。",
      "◯◯さん、今日の気分はどんな感じ？",
      "ゆっくりしていってね、とは本気で言ってます。",
      "なにか残す日も、なにも残さない日も、全部◯◯さん。",
      "ふらっと立ち寄る場所があるって、いいね。",
      "記録がなくても、来たことが残るよ。",
      "ちょっとだけ、自分にやさしくする日。",
      "誰とも比べず、自分だけのペースで。",
      "ふう。今日もおつかれさま。",
      "ちゃんと来てる。えらい。",
      "おかえりなさい。何もしなくてもいい場所へ。"
    ].sample
  end

  def authenticate_user!
    unless user_signed_in?
      redirect_to root_path, alert: "ログインしてください"
    end
  end
end
